<h1>Action Commands</h1>

<div>
    <button [disabled]="actionCommandService.refillAllModel$.getValue().Working"
        (click)="GetOrRefillAllActionCommand('RefillAll')" mat-button color="primary"><span>Refill all action
            command</span>
        <mat-progress-bar mode="indeterminate" *ngIf="actionCommandService.refillAllModel$.getValue().Working">
        </mat-progress-bar>
    </button>
    <mat-error *ngIf="actionCommandService.refillAllModel$.getValue().Error">
        <span>
            {{ actionCommandService.refillAllModel$.getValue().Error.error }}
        </span>
    </mat-error>
</div>

<div>
    <button [disabled]="actionCommandService.getAllModel$.getValue().Working"
        (click)="GetOrRefillAllActionCommand('GetAll')" mat-button color="primary"><span>Get all action command</span>
        <mat-progress-bar mode="indeterminate" *ngIf="actionCommandService.getAllModel$.getValue().Working">
        </mat-progress-bar>
    </button>
    <mat-error *ngIf="actionCommandService.getAllModel$.getValue().Error">
        <span>
            {{ actionCommandService.getAllModel$.getValue().Error.error }}
        </span>
    </mat-error>
</div>

<ul *ngIf="actionCommandService.actionCommandModel$.getValue().ActionCommandList">
    <li *ngFor="let actionCommand of actionCommandService.actionCommandModel$.getValue().ActionCommandList">
        <button (click)="ViewDetails(actionCommand)" mat-button color="primary">
            <mat-icon>arrow_drop_down_circle</mat-icon>
        </button>
        <span>&nbsp;&nbsp;{{ actionCommand.Action }}&nbsp;&nbsp;</span>
        <button disabled="{{ actionCommand.Working }}" (click)="RunActionCommand(actionCommand)" mat-button
            color="primary">
            {{ actionCommand.Command }}
        </button>

        <mat-progress-bar *ngIf="actionCommand.Working" mode="indeterminate">
        </mat-progress-bar>

        <mat-error *ngIf="actionCommand.Error">
            <span>
                {{ actionCommand.Error.error }}
            </span>
        </mat-error>
    
        <div *ngIf="actionCommand.ViewDetails">
            <h2>Full File Name</h2>
            <pre>{{ actionCommand.FullFileName }}</pre>
            <h2>Description</h2>
            <pre>{{ actionCommand.Description }}</pre>
            <h2>Temp Status Text</h2>
            <pre>{{ actionCommand.TempStatusText }}</pre>
            <h2>Execution Status Text</h2>
            <pre>{{ actionCommand.ExecutionStatusText }}</pre>
            <h2>Files Status Text</h2>
            <pre>{{ actionCommand.FilesStatusText }}</pre>
            <h2>Percent Completed</h2>
            <pre>{{ actionCommand.PercentCompleted }}</pre>
            <h2>Last Update Date</h2>
            <div>{{ actionCommand.LastUpdateDate | date:'longDate' }}</div>
            <h2>Current Status</h2>
            <pre>{{ actionCommandService.actionCommandTextModel$.value.CurrentStatus }}</pre>
        </div>
    </li>
</ul>
