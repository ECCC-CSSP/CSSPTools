<span *ngIf="(appStateService.AppState$ | async).Working">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</span>

<table class="table-fixed">
    <thead>
        <tr>
            <td colspan="11">
                <div>
                    This section will hold the buttons<br />
                    This section will hold the buttons<br />
                    This section will hold the buttons<br />
                </div>
            </td>
            <ng-container *ngFor="let StatMWQMRun of StatMWQMRunList; let i = index">
                <th [ngClass]="StatMWQMRun.UseInStat ? 'selected' : ''">
                    {{ StatMWQMRun.RunYear }}<br />{{ dateFormatService.GetMonthName(StatMWQMRun.RunMonth, true) }}<br />{{ StatMWQMRun.RunDay }}
                </th>
            </ng-container>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="noWrapCenter">Site</td>
            <td class="noWrapCenter">Samples</td>
            <td class="noWrapCenter">Period</td>
            <td class="noWrapCenter">Min FC</td>
            <td class="noWrapCenter">Max FC</td>
            <td class="noWrapCenter">GMean</td>
            <td class="noWrapCenter">Median</td>
            <td class="noWrapCenter">P90</td>
            <td class="noWrapCenter">% > 43</td>
            <td class="noWrapCenter">% > 260</td>
            <td>&nbsp;</td>
            <td [attr.colspan]="StatMWQMRunList.length">
                &nbsp;&nbsp;&nbsp;<mat-checkbox disabled checked>Fecal Coliform / 100 mL</mat-checkbox>
                &nbsp;&nbsp;&nbsp;<mat-checkbox>Temperature</mat-checkbox>
                &nbsp;&nbsp;&nbsp;<mat-checkbox>Salinity</mat-checkbox>
                &nbsp;&nbsp;&nbsp;<mat-checkbox>P90</mat-checkbox>
                &nbsp;&nbsp;&nbsp;<mat-checkbox>Geometric Mean</mat-checkbox>
                &nbsp;&nbsp;&nbsp;<mat-checkbox>Median</mat-checkbox>
                &nbsp;&nbsp;&nbsp;<mat-checkbox>% > 43</mat-checkbox>
                &nbsp;&nbsp;&nbsp;<mat-checkbox>% > 260</mat-checkbox>
            </td>
        </tr>

        <ng-container *ngFor="let StatMWQMSite of StatMWQMSiteList">
            <tr *ngIf="StatMWQMSite.TVItemModel.TVItem.IsActive">
                <td class="noWrapCenter">
                    {{ StatMWQMSite?.TVItemModel?.TVItemLanguageList[language]?.TVText }}
                    ({{ GetClassificationAcronym(StatMWQMSite?.MWQMSite?.MWQMSiteLatestClassification) }})
                    <span
                        class="{{ GetClassificationColor(StatMWQMSite?.MWQMSite?.MWQMSiteLatestClassification) }}">&nbsp;&nbsp;</span>
                </td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.SampCount }}</td>
                <td class="noWrapCenter">
                    {{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.StartYear }}-{{ StatMWQMSite?.StatMWQMSiteSampleList[0].EndYear }}
                </td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.MinFC }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.MaxFC }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.GeoMean | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.Median | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.P90 | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.PercOver43 | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.PercOver260 | number:'0.0-0' }}
                </td>
                <td class="{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.ColorAndLetter?.color }}">
                    &nbsp;{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.ColorAndLetter?.letter }}&nbsp;</td>
                <ng-container *ngFor="let StatMWQMRun of StatMWQMRunList">
                    <td class="noWrapCenter">
                        {{ StatMWQMSite?.StatMWQMSiteSampleList[StatMWQMRun.RunIndex]?.FC }}
                    </td>
                </ng-container>
            </tr>
        </ng-container>
        <tr>
            <th colspan="11" class="verticalRight">&nbsp;</th>
            <th colspan="3">Precipitation</th>
        </tr>
        <tr>
            <th colspan="9" rowspan="14">
                <strong>Highlight salinity deviation from average</strong>
                <mat-select>
                    <mat-option *ngFor="let val of [3,4,5,6,7,8,9,10,11,12]" value="val">
                        {{val}}
                    </mat-option>
                </mat-select>
                <br />
                <span>Short range : [-1] - [</span>
                <span><input type="radio" name="ShortRange" value="-1"> (-1)</span>
                <span><input type="radio" name="ShortRange" value="-2"> (-2)</span>
                <span><input type="radio" name="ShortRange" value="-3" checked="checked"> (-3)</span>
                <span><input type="radio" name="ShortRange" value="-4"> (-4)</span>
                <span><input type="radio" name="ShortRange" value="-5"> (-5)</span>
                <br />
                <span>Mid range : [<span>-4</span>] - [</span>
                <span><input type="radio" name="MidRange" value="-2"> (-2)</span>
                <span><input type="radio" name="MidRange" value="-3"> (-3)</span>
                <span><input type="radio" name="MidRange" value="-4"> (-4)</span>
                <span><input type="radio" name="MidRange" value="-5"> (-5)</span>
                <span><input type="radio" name="MidRange" value="-6" checked="checked"> (-6)</span>
                <span><input type="radio" name="MidRange" value="-7"> (-7)</span>
                <span><input type="radio" name="MidRange" value="-8"> (-8)</span>
                <span>]</span>
                <br />
                <table>
                    <tbody>
                        <tr>
                            <th colspan="5" class="h4">Upper and lower rain limit considered dry or wet</th>
                        </tr>
                        <tr>
                            <th>&nbsp;</th>
                            <th>0-24h</th>
                            <th>0-48h</th>
                            <th>0-72h</th>
                            <th>0-96h</th>
                        </tr>
                        <tr>
                            <td>Dry</td>
                            <td>
                                <mat-select name="UpperRainLimitStillConsideredDry1">
                                    <mat-option
                                        *ngFor="let val of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                            <td>
                                <mat-select name="UpperRainLimitStillConsideredDry2">
                                    <mat-option
                                        *ngFor="let val of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                            <td>
                                <mat-select name="UpperRainLimitStillConsideredDry3">
                                    <mat-option
                                        *ngFor="let val of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                            <td>
                                <mat-select name="UpperRainLimitStillConsideredDry4">
                                    <mat-option
                                        *ngFor="let val of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                        </tr>
                        <tr>
                            <td>Wet</td>
                            <td>
                                <mat-select name="LowerRainLimitConsideredRain1">
                                    <mat-option
                                        *ngFor="let val of [5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,98,99,100]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                            <td>
                                <mat-select name="LowerRainLimitConsideredRain2">
                                    <mat-option
                                        *ngFor="let val of [5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,98,99,100]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                            <td>
                                <mat-select name="LowerRainLimitConsideredRain3">
                                    <mat-option
                                        *ngFor="let val of [5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,98,99,100]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                            <td>
                                <mat-select name="LowerRainLimitConsideredRain4">
                                    <mat-option
                                        *ngFor="let val of [5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,98,99,100]"
                                        value="1">
                                        {{ val }}
                                    </mat-option>
                                </mat-select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <span>Color and letter schema
                    <button>
                        <mat-icon>arrow</mat-icon>
                    </button>
                </span>
                <table *ngIf="false">
                    <tbody>
                        <tr>
                            <td class="bgbluef">F</td>
                            <td>GM &gt; 181 or Med &gt; 181 or P90 &gt; 460 or % &gt; 260 &gt; 18</td>
                        </tr>
                        <tr>
                            <td class="bgbluee">E</td>
                            <td>GM &gt; 163 or Med &gt; 163 or P90 &gt; 420 or % &gt; 260 &gt; 17</td>
                        </tr>
                        <tr>
                            <td class="bgblued">D</td>
                            <td>GM &gt; 144 or Med &gt; 144 or P90 &gt; 380 or % &gt; 260 &gt; 15</td>
                        </tr>
                        <tr>
                            <td class="bgbluec">C</td>
                            <td>GM &gt; 125 or Med &gt; 125 or P90 &gt; 340 or % &gt; 260 &gt; 13</td>
                        </tr>
                        <tr>
                            <td class="bgblueb">B</td>
                            <td>GM &gt; 107 or Med &gt; 107 or P90 &gt; 300 or % &gt; 260 &gt; 12</td>
                        </tr>
                        <tr>
                            <td class="bgbluea">A</td>
                            <td>GM &gt; 88 or Med &gt; 88 or P90 &gt; 260 or % &gt; 260 &gt; 10</td>
                        </tr>
                        <tr>
                            <td class="bgredf">F</td>
                            <td>GM &gt; 76 or Med &gt; 76 or P90 &gt; 224 or % &gt; 43 &gt; 27</td>
                        </tr>
                        <tr>
                            <td class="bgrede">E</td>
                            <td>GM &gt; 63 or Med &gt; 63 or P90 &gt; 188 or % &gt; 43 &gt; 23</td>
                        </tr>
                        <tr>
                            <td class="bgredd">D</td>
                            <td>GM &gt; 51 or Med &gt; 51 or P90 &gt; 152 or % &gt; 43 &gt; 20</td>
                        </tr>
                        <tr>
                            <td class="bgredc">C</td>
                            <td>GM &gt; 39 or Med &gt; 39 or P90 &gt; 115 or % &gt; 43 &gt; 17</td>
                        </tr>
                        <tr>
                            <td class="bgredb">B</td>
                            <td>GM &gt; 26 or Med &gt; 26 or P90 &gt; 79 or % &gt; 43 &gt; 13</td>
                        </tr>
                        <tr>
                            <td class="bgreda">A</td>
                            <td>GM &gt; 14 or Med &gt; 14 or P90 &gt; 43 or % &gt; 43 &gt; 10</td>
                        </tr>
                        <tr>
                            <td class="bggreenf">F</td>
                            <td>GM &gt; 12 or Med &gt; 12 or P90 &gt; 36 or % &gt; 43 &gt; 8</td>
                        </tr>
                        <tr>
                            <td class="bggreene">E</td>
                            <td>GM &gt; 9 or Med &gt; 9 or P90 &gt; 29 or % &gt; 43 &gt; 7</td>
                        </tr>
                        <tr>
                            <td class="bggreend">D</td>
                            <td>GM &gt; 7 or Med &gt; 7 or P90 &gt; 22 or % &gt; 43 &gt; 5</td>
                        </tr>
                        <tr>
                            <td class="bggreenc">C</td>
                            <td>GM &gt; 5 or Med &gt; 5 or P90 &gt; 14 or % &gt; 43 &gt; 3</td>
                        </tr>
                        <tr>
                            <td class="bggreenb">B</td>
                            <td>GM &gt; 2 or Med &gt; 2 or P90 &gt; 7 or % &gt; 43 &gt; 2</td>
                        </tr>
                        <tr>
                            <td class="bggreena">A</td>
                            <td>Everything else</td>
                        </tr>
                    </tbody>
                </table>
            </th>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                Run Day (0)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay0 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                0-24h (-1)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay1 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                24-48h (-2)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay2 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                48-72h (-3)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay3 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                72-96h (-4)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay4 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                (-5)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay5 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                (-6)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay6 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                (-7)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay7 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                (-8)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay8 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                (-9)
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay9 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                (-10)
            </td>
            <td class="noWrapCenter" class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.RainDay10 | number:'0.0-0' }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                Start Tide
            </td>
            <td class="noWrapCenter" class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.StartTide }}
            </td>
        </tr>
        <tr>
            <td class="noWrapCenter" colspan="2">
                End Tide
            </td>
            <td class="noWrapCenter" *ngFor="let StatMWQMRun of StatMWQMRunList">
                {{ StatMWQMRun.EndTide }}
            </td>
        </tr>
        <tr *ngIf="AppState.InactVisible">
            <td colspan="11">Inactive</td>
            <td [attr.colspan]="StatMWQMRunList.length">Inactive</td>
        </tr>
        <ng-container *ngFor="let StatMWQMSite of StatMWQMSiteList">
            <tr *ngIf="!StatMWQMSite.TVItemModel.TVItem.IsActive">
                <td class="noWrapCenter">
                    {{ StatMWQMSite?.TVItemModel?.TVItemLanguageList[language]?.TVText }}
                    ({{ GetClassificationAcronym(StatMWQMSite?.MWQMSite?.MWQMSiteLatestClassification) }})
                    <span
                        class="{{ GetClassificationColor(StatMWQMSite?.MWQMSite?.MWQMSiteLatestClassification) }}">&nbsp;&nbsp;</span>
                </td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.SampCount }}</td>
                <td class="noWrapCenter">
                    {{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.StartYear }}-{{ StatMWQMSite?.StatMWQMSiteSampleList[0].EndYear }}
                </td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.MinFC }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.MaxFC }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.GeoMean | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.Median | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.P90 | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.PercOver43 | number:'0.0-0' }}</td>
                <td class="noWrapCenter">{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.PercOver260 | number:'0.0-0' }}
                </td>
                <td class="{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.ColorAndLetter?.color }}">
                    &nbsp;{{ StatMWQMSite?.StatMWQMSiteSampleList[0]?.ColorAndLetter?.letter }}&nbsp;</td>
                <ng-container *ngFor="let StatMWQMRun of StatMWQMRunList">
                    <td class="noWrapCenter">
                        {{ StatMWQMSite?.StatMWQMSiteSampleList[StatMWQMRun.RunIndex]?.FC }}
                    </td>
                </ng-container>
            </tr>
        </ng-container>
    </tbody>
</table>