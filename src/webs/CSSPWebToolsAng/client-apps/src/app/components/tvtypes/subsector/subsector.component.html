<span *ngIf="(appStateService.AppState$ | async).Working || (appLoadedService.AppLoaded$ | async).Working">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</span>
<p class="loading-status" *ngIf="(appLoadedService.AppLoaded$ | async).Status">
    {{ appLoadedService.AppLoaded$?.getValue()?.Status }}
</p>

<button mat-button [ngClass]="componentButtonSelectionService.ColorSelectionSubsector(subsectorSubComponentEnum.MWQMSites)"
    (click)="componentShowService.ShowSubsector(subsectorSubComponentEnum.MWQMSites)"
    title="{{ appLanguageService.AppLanguage.SubsectorShowMWQMSites[appStateService.AppState$?.getValue().Language] }}">
    <span>
        {{ appLanguageService.AppLanguage.SubsectorMWQMSites[appStateService.AppState$?.getValue().Language] }}
        <span class="badge-stat" *ngIf="appStateService.AppState$.getValue().StatCountVisible">
            &nbsp;&nbsp;{{ statCountService.GetStatCount(appLoadedService.AppLoaded$.getValue().WebSubsector?.TVItemModel, tvTypeEnum.MWQMSite) }}&nbsp;&nbsp;
        </span>                
    </span>
    <span class="biggerArrow"
        (click)="tvItemSortOrderService.ChangeTVItemSortOrder('SubsectorMWQMSitesSortOrder', ascDescEnum.Ascending)"
        *ngIf="appStateService.AppState$.getValue().SubsectorMWQMSitesSortOrder == ascDescEnum.Descending">
        &nbsp;&nbsp;&uarr;
    </span>
    <span class="biggerArrow"
        (click)="tvItemSortOrderService.ChangeTVItemSortOrder('SubsectorMWQMSitesSortOrder', ascDescEnum.Descending)"
        *ngIf="appStateService.AppState$.getValue().SubsectorMWQMSitesSortOrder == ascDescEnum.Ascending">
        &nbsp;&nbsp;&darr;
    </span>
</button>
<button mat-button [ngClass]="componentButtonSelectionService.ColorSelectionSubsector(subsectorSubComponentEnum.Analysis)"
    (click)="componentShowService.ShowSubsector(subsectorSubComponentEnum.Analysis)"
    title="{{ appLanguageService.AppLanguage.SubsectorShowAnalysis[appStateService.AppState$?.getValue().Language] }}">
    {{ appLanguageService.AppLanguage.SubsectorAnalysis[appStateService.AppState$?.getValue().Language] }}
</button>
<button mat-button [ngClass]="componentButtonSelectionService.ColorSelectionSubsector(subsectorSubComponentEnum.MWQMRuns)"
    (click)="componentShowService.ShowSubsector(subsectorSubComponentEnum.MWQMRuns)"
    title="{{ appLanguageService.AppLanguage.SubsectorShowMWQMRuns[appStateService.AppState$?.getValue().Language] }}">
    <span>
        {{ appLanguageService.AppLanguage.SubsectorMWQMRuns[appStateService.AppState$?.getValue().Language] }}
        <span class="badge-stat" *ngIf="appStateService.AppState$.getValue().StatCountVisible">
            &nbsp;&nbsp;{{ statCountService.GetStatCount(appLoadedService.AppLoaded$.getValue().WebSubsector?.TVItemModel, tvTypeEnum.MWQMRun) }}&nbsp;&nbsp;
        </span>                        
    </span>
    <span class="biggerArrow"
        (click)="tvItemSortOrderService.ChangeTVItemSortOrder('SubsectorMWQMRunsSortOrder', ascDescEnum.Ascending)"
        *ngIf="appStateService.AppState$.getValue().SubsectorMWQMRunsSortOrder == ascDescEnum.Descending">
        &nbsp;&nbsp;&uarr;
    </span>
    <span class="biggerArrow"
        (click)="tvItemSortOrderService.ChangeTVItemSortOrder('SubsectorMWQMRunsSortOrder', ascDescEnum.Descending)"
        *ngIf="appStateService.AppState$.getValue().SubsectorMWQMRunsSortOrder == ascDescEnum.Ascending">
        &nbsp;&nbsp;&darr;
    </span>
</button>
<button mat-button [ngClass]="componentButtonSelectionService.ColorSelectionSubsector(subsectorSubComponentEnum.PollutionSourceSites)"
    (click)="componentShowService.ShowSubsector(subsectorSubComponentEnum.PollutionSourceSites)"
    title="{{ appLanguageService.AppLanguage.SubsectorShowPollutionSourceSites[appStateService.AppState$?.getValue().Language] }}">
    <span>
        {{ appLanguageService.AppLanguage.SubsectorPollutionSourceSites[appStateService.AppState$?.getValue().Language] }}
        <span class="badge-stat" *ngIf="appStateService.AppState$.getValue().StatCountVisible">
            &nbsp;&nbsp;{{ statCountService.GetStatCount(appLoadedService.AppLoaded$.getValue().WebSubsector?.TVItemModel, tvTypeEnum.PolSourceSite) }}&nbsp;&nbsp;
        </span>                                
    </span>
    <span class="biggerArrow"
        (click)="tvItemSortOrderService.ChangeTVItemSortOrder('SubsectorPolSourceSitesSortOrder', ascDescEnum.Ascending)"
        *ngIf="appStateService.AppState$.getValue().SubsectorPolSourceSitesSortOrder == ascDescEnum.Descending">
        &nbsp;&nbsp;&uarr;
    </span>
    <span class="biggerArrow"
        (click)="tvItemSortOrderService.ChangeTVItemSortOrder('SubsectorPolSourceSitesSortOrder', ascDescEnum.Descending)"
        *ngIf="appStateService.AppState$.getValue().SubsectorPolSourceSitesSortOrder == ascDescEnum.Ascending">
        &nbsp;&nbsp;&darr;
    </span>
</button>
<button mat-button [ngClass]="componentButtonSelectionService.ColorSelectionSubsector(subsectorSubComponentEnum.Files)"
    (click)="componentShowService.ShowSubsector(subsectorSubComponentEnum.Files)"
    title="{{ appLanguageService.AppLanguage.SubsectorShowFiles[appStateService.AppState$?.getValue().Language] }}">
    <span>
        {{ appLanguageService.AppLanguage.SubsectorFiles[appStateService.AppState$?.getValue().Language] }}
        <span class="badge-stat" *ngIf="appStateService.AppState$.getValue().StatCountVisible">
            &nbsp;&nbsp;{{ statCountService.GetStatCount(appLoadedService.AppLoaded$.getValue().WebSubsector?.TVItemModel, tvTypeEnum.File) }}/
            {{ statCountService.GetStatCount(appLoadedService.AppLoaded$.getValue().WebSubsector?.TVItemModel, tvTypeEnum.TotalFile) }}&nbsp;&nbsp;
        </span>                                        
    </span>
</button>
<button mat-button [ngClass]="componentButtonSelectionService.ColorSelectionSubsector(subsectorSubComponentEnum.SubsectorTools)"
    (click)="componentShowService.ShowSubsector(subsectorSubComponentEnum.SubsectorTools)"
    title="{{ appLanguageService.AppLanguage.SubsectorShowSubsectorTools[appStateService.AppState$?.getValue().Language] }}">
    {{ appLanguageService.AppLanguage.SubsectorSubsectorTools[appStateService.AppState$?.getValue().Language] }}
</button>
<button mat-button [ngClass]="componentButtonSelectionService.ColorSelectionSubsector(subsectorSubComponentEnum.LogBook)"
    (click)="componentShowService.ShowSubsector(subsectorSubComponentEnum.LogBook)"
    title="{{ appLanguageService.AppLanguage.SubsectorShowLogBook[appStateService.AppState$?.getValue().Language] }}">
    {{ appLanguageService.AppLanguage.SubsectorLogBook[appStateService.AppState$?.getValue().Language] }}
</button>

<app-tvitem-list
    *ngIf="appStateService.AppState$?.getValue()?.SubsectorSubComponent == subsectorSubComponentEnum.MWQMSites"
    [AppState]="appStateService.AppState$?.getValue()"
    [TVItemList]="appLoadedService.AppLoaded$?.getValue()?.SubsectorMWQMSiteList">
</app-tvitem-list>

<div *ngIf="appStateService.AppState$?.getValue()?.SubsectorSubComponent == subsectorSubComponentEnum.Analysis">
    <app-analysis></app-analysis>
</div>

<app-tvitem-list
    *ngIf="appStateService.AppState$?.getValue()?.SubsectorSubComponent == subsectorSubComponentEnum.MWQMRuns"
    [AppState]="appStateService.AppState$?.getValue()"
    [TVItemList]="appLoadedService.AppLoaded$?.getValue()?.SubsectorMWQMRunList">
</app-tvitem-list>

<app-tvitem-list
    *ngIf="appStateService.AppState$?.getValue()?.SubsectorSubComponent == subsectorSubComponentEnum.PollutionSourceSites"
    [AppState]="appStateService.AppState$?.getValue()"
    [TVItemList]="appLoadedService.AppLoaded$?.getValue()?.SubsectorPolSourceSiteList">
</app-tvitem-list>

<app-file-list *ngIf="appStateService.AppState$?.getValue()?.SubsectorSubComponent == subsectorSubComponentEnum.Files"
    [AppState]="appStateService.AppState$?.getValue()"
    [TVFileModelListList]="appLoadedService.AppLoaded$?.getValue()?.SubsectorFileListList">
</app-file-list>

<div *ngIf="appStateService.AppState$?.getValue()?.SubsectorSubComponent == subsectorSubComponentEnum.SubsectorTools">
    <app-subsector-tools></app-subsector-tools>
</div>

<div *ngIf="appStateService.AppState$?.getValue()?.SubsectorSubComponent == subsectorSubComponentEnum.LogBook">
    <app-log-book></app-log-book>
</div>